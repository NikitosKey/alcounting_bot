# Телеграмм бот Алкоучёт

in progress

...

## Что тут происходит на данный момент

### Что сделано

1) Найден хостинг: <https://www.pythonanywhere.com> (но скорее всего переедем на GitHub Actions)
2) Выбраны библиотеки и язык для бота
3) Намечен примерный план работы
4) Выбрана система для хранения данных: SQLite
5) Начато формирование структуры пользовательских данных

### Что нужно сделать

Проверка выполняется при запуске бота пользователем (Есть вопрос, что делать, если уровень доступа изменился, пока что нужно перезапустить бота, тогда пользователь получит обновлённые права)

#### Уровни доступа

1. Администратор.

    Имеет полный доступ ко всем возможностям бота.

   - выбор роли заказчика или бармена (скоро)
   - различные логи (как получится)
   - какая-либо статистка (не скоро)
   - вносить изменения в списки прав (не скоро)
   - фичи, которые я ещё не придумал (не скоро)

2. Бармен.

    - может посмотреть очередь заказов (скоро)
    - отмечать выполненные заказы (скоро)
    - принимать заказы, заказ получит соответствующий статус (не скоро)
    - заказать что-либо самостоятельно (либо переключиться на меню заказчика) (что-то из этого скоро)

3. Покупатель (заказчик).

    - Может посмотреть барную карту (скоро)
    - Посмотреть информацию о позициях (не скоро)
    - Выбрать из перечня, подтвердить и заказать (скоро)
    - Посмотреть свои заказы (не скоро) и их статус (ещё менее скоро)
    - История заказов (ещё менее скоро)
    - Сумма заказов, календарь вечеринок... (просто идеи, которые скорее всего не буду делать)

#### База данных

Находится в data/database.db (загитинорена во избежание утечки пользовательских данных) хранится локально на хосте

Представляет собой SQLite базу, вся логика прописывается в файле database.py. Позднее нужно будет создать класс, обслуживающий эту бд.

Бд содержит таблицу пользователей, барную карту и таблицу заказов (очередь бармена)

Пока что структура примерная, походу дела картина станет яснее.

##### Очередь бармена

   Табличка в базе данных, где хранится:

- номер заказа (может и не нужен)
- информация о заказчике
- информация о бармене
- информация о выбранном пункте из меню, либо просто номер из барной карты
- статус заказа
- список со временем изменений статуса заказа.

(Есть вопрос с тем, чтобы как-то очищать очередь, хотя возможно в бд будет лежать вообще всё, а клиент будет получать информацию через фильтр статуса, времени и прочего)

##### Барная карта

Табличка в бд с полями:

- название
- описание
- стоимость
- возможно фото

##### Данные пользователей

Возможно сюда в будущем прикрутится система логина.

Табличка содержит:

- id пользователя
- имя пользователя
- уровень доступа (тип пользователя)
- ...

...

### Introducing

...

### Requriments

- python-telegram-bot v21.0.1 installed from pip
- python 3.8 - 3.12
- BOT_TOKEN a variable in your environment with the value of the Telegram bot API token

### Instructions

...
